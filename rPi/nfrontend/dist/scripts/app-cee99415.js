!function(){"use strict";angular.module("app",["ngMaterial","btford.socket-io"])}(),function(){"use strict";function t(t,e,a){var n=t();return n.on("info:new-data",function(t){e.reloadData().then(function(){a.$emit("new-data"),a.$emit("new-data:notification",t)})}),n.on("error:no-data",function(t){a.$emit("no-data:notification",t)}),n}angular.module("app").factory("mySocket",t),t.$inject=["socketFactory","actualDataFactory","$rootScope"]}(),function(){"use strict";function t(t){function e(t,e){return a("/api/"+t,e)}function a(t,e){var a={method:"GET",url:t};return e&&1!=e&&(a.headers={"If-None-Match":e,"Cache-Control":"none"}),o(a,e)}function n(t,e){var a={method:"POST",url:"/api/"+t,data:JSON.stringify(e)};return o(a)}function i(t){var e={method:"DELETE",url:"/api/"+t};return o(e)}function o(e,a){return l("URL= "+e.url),l("Method= "+e.method),t(e).then(function(t){return l("Success= "+t.status),a?{etag:t.headers("ETag"),data:t.data}:t.data},function(t){return 304==t.status?(l("Success= 304"),304):(l("Error= "+t.status),t.data)})}function r(e,a){t.defaults.headers.common[e]=a}function l(t){console.log("RouteProvider: "+t)}return{get:e,post:n,"delete":i,setHead:r}}angular.module("app").service("routeProviderService",["$http",t])}(),function(){"use strict";function t(t){var e=[{name:"Dashboard",icon:"dashboard",sref:".dashboard"},{name:"Settings",icon:"view_module",sref:".profile"}];return{loadAllItems:function(){return t.when(e)}}}angular.module("app").service("navService",["$q",t])}(),function(){"use strict";function t(t,e){function a(){var t=[];return r=n(),l=i(),s=o(),t.push(r),t.push(l),t.push(s),e.all(t)}function n(){return t.get("actual-data").then(function(t){if(t){var e={};return t.forEach(function(t){if(1===t.length)for(var a in t[0])"time"!==a&&(e[a]={time:t[0].time,value:t[0][a]});else for(var n in t)"time"!==n&&(e[n]={time:t.time,value:t[n]})}),e}})}function i(){return t.get("recent-chart-data").then(function(t){return t?t:void 0})}function o(){return t.get("long-term-chart-data").then(function(t){return t?t:void 0})}var r=n(),l=i(),s=o();return{getActualData:function(){return r},getThreeDayChartData:function(){return l},getLongTermChartData:function(){return s},reloadData:a}}angular.module("app").factory("actualDataFactory",t),t.$inject=["routeProviderService","$q"]}(),angular.module("app").directive("panelWidget",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{title:"@",mode:"@",template:"@",options:"@"},template:'<section layout-margin class="md-whiteframe-z1 panel-widget">  <md-toolbar md-theme="custom" class="md-hue-1 panel-widget-toolbar">    <div class="md-toolbar-tools">      <h3 class="panel-widget-tittle">{{title}}</h3>      <span flex></span>      <md-button ng-show="options" ng-click="$showOptions = !$showOptions" class="md-icon-button" aria-label="Show options">        <i class="material-icons">more_vert</i>      </md-button>    </div>  </md-toolbar>  <div ng-include="template"/></section>',compile:function(t,e,a){return function(t,e){a(t,function(t){e.append(t)})}}}}),function(){"use strict";function t(){return{restrict:"E",scope:{title:"@",theme:"@",messages:"="},template:'<section>  <md-subheader ng-class="theme">{{title}}</md-subheader>  <md-list>    <md-list-item class="md-3-line" ng-repeat="message in messages">    <img class="md-avatar" ng-src="{{message.icon}}">    <div class="md-list-item-text">      <h3>{{message.subject}}</h3>      <h4>{{message.location}}</h4>      <p>{{message.text}}</p>    </div>    </md-list-item>  </md-list></section>',link:function(){}}}angular.module("app").directive("messagesSection",t)}(),function(){function t(){}angular.module("app").controller("ProfileController",[t])}(),function(){function t(t){function e(){t.$on("new-data:notification",function(t,e){a.notifications=[{icon:"/assets/images/info-outline.png",subject:"Sensor notification",location:"Weather-Station Red box",text:e.message+" "+e.time}]}),t.$on("no-data:notification",function(t,e){a.errors=[{icon:"/assets/images/error.png",subject:"Sensor error",location:"Weather-Station Red box",text:e.message+" "+e.time}]})}var a=this;a.notifications=[],a.errors=[],e()}angular.module("app").controller("MessagesController",t),t.$inject=["$rootScope"]}(),function(){function t(t,e,a,n,i,o){function r(){e("right").toggle()}function l(){var t=n.when(!0);t.then(function(){e("left").toggle()})}function s(t){d.title=t.name,d.toggleItemsList(),d.showSimpleToast(d.title)}function m(t){o.show(o.simple().content(t).hideDelay(2e3).position("bottom right"))}var d=this;d.menuItems=[],d.selectItem=s,d.toggleItemsList=l,d.title=i.current.data.title,d.showSimpleToast=m,d.toggleRightSidebar=r,t.loadAllItems().then(function(t){d.menuItems=[].concat(t)})}angular.module("app").controller("MainController",["navService","$mdSidenav","$log","$q","$state","$mdToast","mySocket",t])}(),function(){function t(t,e,a){function n(){i(),a.$on("new-data",function(){i()})}function i(){s.threeDayPeriod?e.getThreeDayChartData().then(function(t){l(t)}):e.getLongTermChartData().then(function(t){l(t)})}function o(){i()}function r(t){return t.substring(0,1).toUpperCase()+t.substring(1)}function l(t){var e=t.filter(function(t){return null!==t[d[s.threeDayPeriod]+m]}).map(function(t){return{x:Date.parse(t.time),y:t[d[s.threeDayPeriod]+m]/p[m]}});s.actualData=[{key:r(m),color:g[m],values:e}]}var s=this,m=t.$parent.mode;s.threeDayPeriod=!0;var d={"true":"","false":"mean_mean_"},u={temperature:"lineWithFocusChart",pressure:"lineWithFocusChart",humidity:"lineWithFocusChart"},c={temperature:"°C",pressure:"hPa",humidity:"%"},p={temperature:1,pressure:100,humidity:1},g={temperature:"#64bd63",pressure:"#5d8fc2",humidity:"#dd5826"};s.chartOptions={chart:{type:u[m],height:450,x:function(t){return t.x},y:function(t){return t.y},useInteractiveGuideline:!0,xAxis:{axisLabel:"Time",tickFormat:function(t){return d3.time.format("%H:%M %x")(new Date(t))},showMaxMin:!1,staggerLabels:!0,axisLabelDistance:10},x2Axis:{tickFormat:function(t){return d3.time.format("%x")(new Date(t))},showMaxMin:!1},yAxis:{axisLabel:r(m)+" ("+c[m]+")",tickFormat:function(t){return d3.format(".02f")(t)}}}},n(),s.changePeriod=o}angular.module("app").controller("HistogramController",t),t.$inject=["$scope","actualDataFactory","$rootScope"]}(),function(){function t(t,e,a){function n(){i(),a.$on("new-data",function(){i()})}function i(){e.getActualData().then(function(t){o.actualData=t})}var o=this;o.actualData={},o.mode=t.$parent.mode,o.units={temperature:"°C",pressure:'<span class="long-unit">hPa</span>',humidity:"%",uv_radiation:'<span class="long-unit"><sup>mW</sup>&frasl;<sub>cm<sup>2</sup></sub></span>'},o.prefix={temperature:1,pressure:100,humidity:1,uv_radiation:1},n()}angular.module("app").controller("ActualDataController",t),t.$inject=["$scope","actualDataFactory","$rootScope"]}(),angular.module("smarthomeDashboard",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ngMaterial","nvd3","app"]).config(["$stateProvider","$urlRouterProvider","$mdThemingProvider","$mdIconProvider",function(t,e,a,n){t.state("home",{url:"",templateUrl:"app/views/main.html",controller:"MainController",controllerAs:"vm","abstract":!0}).state("home.dashboard",{url:"/dashboard",templateUrl:"app/views/dashboard.html",data:{title:"Dashboard"}}).state("home.profile",{url:"/profile",templateUrl:"app/views/profile.html",controller:"ProfileController",controllerAs:"vm",data:{title:"Profile"}}),e.otherwise("/dashboard"),a.theme("default").primaryPalette("indigo",{"default":"600"}).accentPalette("orange",{"default":"500"}).warnPalette("orange"),a.theme("dark","default").primaryPalette("defaultPrimary").dark(),a.theme("grey","default").primaryPalette("grey"),a.theme("custom","default").primaryPalette("defaultPrimary",{"hue-1":"50"}),a.definePalette("defaultPrimary",{50:"#FFFFFF",100:"rgb(255, 198, 197)",200:"#E75753",300:"#E75753",400:"#E75753",500:"#E75753",600:"#E75753",700:"#E75753",800:"#E75753",900:"#E75753",A100:"#E75753",A200:"#E75753",A400:"#E75753",A700:"#E75753"}),n.icon("user","assets/images/user.svg",64)}]),angular.module("smarthomeDashboard").run(["$templateCache",function(t){t.put("app/views/dashboard.html",'<div layout-gt-md="row"><panel-widget flex="" title="Temperature" mode="temperature" template="app/views/partials/actualdata.html" class="fixed-height-small-widget"></panel-widget><panel-widget flex="" title="Pressure" mode="pressure" template="app/views/partials/actualdata.html" class="fixed-height-small-widget"></panel-widget><panel-widget flex="" title="Humidity" mode="humidity" template="app/views/partials/actualdata.html" class="fixed-height-small-widget"></panel-widget><panel-widget flex="" title="UV Irradiance" mode="uv_radiation" template="app/views/partials/actualdata.html" class="fixed-height-small-widget"></panel-widget></div><div layout-gt-md="row"><panel-widget flex="" title="Temperature chart" mode="temperature" template="app/views/partials/chart.html" options="true"></panel-widget></div><div layout-gt-md="row"><panel-widget flex="" title="Pressure histogram" mode="pressure" template="app/views/partials/chart.html" options="true"></panel-widget></div><div layout-gt-md="row"><panel-widget flex="" title="Humidity chart" mode="humidity" template="app/views/partials/chart.html" options="true"></panel-widget></div>'),t.put("app/views/main.html",'<md-sidenav md-is-locked-open="$mdMedia(\'gt-sm\')" md-component-id="left" class="md-whiteframe-z2 md-sidenav-left"><md-toolbar md-theme="custom" class="md-hue-1 md-whiteframe-z2"><md-button layout="row" layout-align="center center" class="md-toolbar-tools md-warn"><h1>WS</h1></md-button></md-toolbar><md-button ng-repeat-start="item in vm.menuItems" layout="column" layout-align="center center" flex="" class="capitalize" ng-click="vm.selectItem(item)" ui-sref-active="md-warn" ui-sref="{{item.sref}}"><div hide-sm="" hide-md="" class="md-tile-content"><i class="material-icons md-36">{{item.icon}}</i></div><div class="md-tile-content">{{item.name}}</div></md-button><md-divider ng-repeat-end=""></md-divider></md-sidenav><div layout="column" flex=""><md-toolbar layout="row" layout-align="center center"><section layout-align="start center" layout-fill="" flex=""><md-button hide-gt-sm="" ng-click="vm.toggleItemsList()" aria-label="Menu"><i class="material-icons">menu</i></md-button></section><section layout-align="end center"><md-button class="toolbar-button" aria-label="Notifications"><i class="material-icons">notifications</i> <span class="notifications-label">0</span></md-button><md-button class="toolbar-button" aria-label="Settings" ng-click="vm.toggleRightSidebar()"><i class="material-icons">menu</i></md-button></section></md-toolbar><md-content flex="" class="md-padding page-content"><div ui-view=""></div></md-content></div><md-sidenav md-component-id="right" class="md-whiteframe-z2 md-sidenav-right"><md-toolbar><md-toolbar class="md-warn" layout="row" layout-align="center center"><img class="img-circle" ng-src="assets/images/feynman.jpg"><md-menu md-offset="0 20"><md-button class="capitalize" ng-click="$mdOpenMenu()" aria-label="Open menu"><span>Benjamin Teke</span> <i class="material-icons">keyboard_arrow_down</i></md-button><md-menu-content width="3"><md-menu-item><md-button ng-click="$mdCloseMenu()" ui-sref="home.profile">Profile</md-button></md-menu-item><md-menu-item><md-button ng-click="$mdCloseMenu()" ui-sref="home.dashboard">Log out</md-button></md-menu-item></md-menu-content></md-menu></md-toolbar></md-toolbar><section><md-toolbar md-theme="grey" class="md-hue-1"><div class="md-toolbar-tools"><h3>Notifications</h3></div></md-toolbar><div ng-include="" src="\'app/views/partials/messages.html\'"></div></section></md-sidenav>'),t.put("app/views/profile.html",'<md-content md-theme="dark" class="md-padding" layout="row" layout-sm="column"><md-input-container><label>Username</label> <input ng-model="vm.user.title"></md-input-container><md-input-container><label>Email</label> <input ng-model="vm.user.email" type="email"></md-input-container></md-content><md-content class="md-padding"><form name="userForm"><div layout="" layout-sm="column"><md-input-container flex="80"><label>Company (Disabled)</label> <input ng-model="vm.user.company" disabled=""></md-input-container><md-input-container flex=""><label>Submission Date</label> <input type="date" ng-model="vm.user.submissionDate"></md-input-container></div><div layout="" layout-sm="column"><md-input-container flex=""><label>First Name</label> <input ng-model="vm.user.firstName" placeholder="Placeholder text"></md-input-container><md-input-container flex=""><label>Last Name</label> <input ng-model="vm.user.lastName"></md-input-container></div><md-input-container flex=""><label>Address</label> <input ng-model="vm.user.address"></md-input-container><div layout="" layout-sm="column"><md-input-container flex=""><label>City</label> <input ng-model="vm.user.city"></md-input-container><md-input-container flex=""><label>State</label> <input ng-model="user.state"></md-input-container><md-input-container flex=""><label>Postal Code</label> <input ng-model="vm.user.postalCode"></md-input-container></div><md-input-container flex=""><label>About us</label> <textarea ng-model="vm.user.biography" columns="1" md-maxlength="150"></textarea></md-input-container></form></md-content>'),t.put("app/views/partials/actualdata.html",'<md-content class="actual-data-widget-content" ng-controller="ActualDataController as vm" layout="row" layout-align="center center"><div class="half-width-div min-max-container"><div class="min-max-div"><span>Min: {{vm.actualData["min_" + vm.mode].value/vm.prefix[vm.mode] | number : 2}} <span ng-bind-html="vm.units[vm.mode]"></span></span><br><span class="small-date">at {{vm.actualData["min_" + vm.mode].time | date:\'H:mm MM/dd\' : \'+0200\'}}</span><br><span>Max: {{vm.actualData["max_" + vm.mode].value/vm.prefix[vm.mode] | number : 2}} <span ng-bind-html="vm.units[vm.mode]"></span></span><br><span class="small-date">at {{vm.actualData["max_" + vm.mode].time | date:\'H:mm MM/dd\' : \'+0200\'}}</span></div></div><div class="half-width-div actual-data-container"><span class="actual-data-value {{vm.mode}}-color">{{vm.actualData["last_" + vm.mode].value/vm.prefix[vm.mode] | number : 2}} <span ng-bind-html="vm.units[vm.mode]"></span><br><span class="long-unit" ng-if="vm.mode === \'uv_radiation\'">UV index: {{12.49 * (vm.actualData["last_" + vm.mode + "_raw"].value * ((2.8-0.99)/15) + 0.99) - 12.49 | number : 1}}</span></span></div></md-content>'),t.put("app/views/partials/chart.html",'<div ng-controller="HistogramController as vm"><md-content class="options option-buttons" ng-show="$showOptions"><md-radio-group ng-model="vm.threeDayPeriod" ng-change="vm.changePeriod()"><md-radio-button ng-value="true">Last three days</md-radio-button><md-radio-button ng-value="false">Last six months</md-radio-button></md-radio-group></md-content><md-content class="md-padding"><nvd3 options="vm.chartOptions" data="vm.actualData"></nvd3></md-content></div>'),t.put("app/views/partials/messages.html",'<div class="messages" ng-controller="MessagesController as vm"><md-content class="messages-content"><messages-section theme="md-primary" title="Last Update" messages="vm.notifications"></messages-section><messages-section theme="md-warn" title="Problems reported" messages="vm.errors"></messages-section><md-divider></md-divider></md-content></div>')}]);